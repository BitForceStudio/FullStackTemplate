# Security

* copy the code from basics, including `\backend` and `\frontend`

## Add Security to Project

Like always, 3 steps

* Dependency
    * `implementation 'org.springframework.boot:spring-boot-starter-security'`
* Yaml configuration
    * null
* Implementation
    * Simple test:
    * create `UserManagerSecurityConfiguration.java` in `\configuration` directory

`UserManagerSecurityConfiguration.java`
```java
@EnableWebSecurity
public class UserManagerSecurityConfiguration extends WebSecurityConfigurerAdapter {

    @Bean
    PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
    
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests().antMatchers("/user/**").hasRole("ADMIN");
        http.formLogin();
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication().withUser("admin").password(passwordEncoder().encode("admin")).roles("ADMIN");
    }
}
```

Open browser and goto `http://localhost:8002/user/get/abc/abc`, then it redirected to the login page autogenerated by Spring Security. Input username (admin) and password (admin) to check the implementation. 

## SSL and HTTPS

### Definition

* SSL
    * SSL stands for Secure Sockets Layer and, in short, it's the standard technology for keeping an internet connection secure and safeguarding any sensitive data that is being sent between two systems, preventing criminals from reading and modifying any information transferred, including potential personal details. The two systems can be a server and a client (for example, a shopping website and browser) or server to server (for example, an application with personal identifiable information or with payroll information).
* HTTPS
    * HTTPS (Hyper Text Transfer Protocol Secure) appears in the URL when a website is secured by an SSL certificate. The details of the certificate, including the issuing authority and the corporate name of the website owner, can be viewed by clicking on the lock symbol on the browser bar.

### Get Certificate Ready

There are two ways to get certificate
* Self Signed
* Buy from trust organizations

Here we are going to use Self Signed certificate. We can generate it by keytool provided by JDK

```bash
.\keytool.exe -genkeypair -alias certificate_name -storetype PKCS12 -keyalg RSA -keysize 2048 -keystore certificate_name.p12 -validity 3650 -keypass password -storepass bitforcesecurity
```

* `genkey`: generates a key
* `alias`: the alias name for the item we are generating;
* `keyalg`: the cryptographic algorithm to generate the key pair;
* `keysize`: the size of the key. We have used 2048 bits, but 4096 would be a better choice for production;
* `storetype`: the type of keystore;
* `keystore`: the name of the keystore;
* `validity`: validity number of days;


